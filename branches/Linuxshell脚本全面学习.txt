Linux shell脚本全面学习

1. Linux 脚本编写基础

1.1 语法基本介绍

1.1.1 开头

程序必须以下面的行开始（必须方在文件的第一行）：

#!/bin/sh

　　符号#!用来告诉系统它后面的参数是用来执行该文件的程序。在这个例子中我们使用/bin/sh来执行程序。

　　当编辑好脚本时，如果要执行该脚本，还必须使其可执行。 
要使脚本可执行：

编译 chmod +x filename 这样才能用./filename 来运行

1.1.2 注释

　　在进行shell编程时，以#开头的句子表示注释，直到这一行的结束。我们真诚地建议您在程序中使用注释。

如果您使用了注释，那么即使相当长的时间内没有使用该脚本，您也能在很短的时间内明白该脚本的作用

及工作原理。

1.1.3 变量

　　在其他编程语言中您必须使用变量。在shell编程中，所有的变量都由字符串组成，并且您不需要对变量

进行声明。要赋值给一个变量，您可以这样写：

#!/bin/sh

#对变量赋值：

a="hello world"

# 现在打印变量a的内容：

echo "A is:"

echo $a

有时候变量名很容易与其他文字混淆，比如：

num=2

echo "this is the $numnd"

这并不会打印出"this is the 2nd"，而仅仅打印"this is the "，因为shell会去搜索变量numnd的值，

但是这个变量时没有值的。可以使用花括号来告诉shell我们要打印的是num变量：

num=2

echo "this is the ${num}nd"

　　这将打印： this is the 2nd 

1.1.4 环境变量

由export关键字处理过的变量叫做环境变量。我们不对环境变量进行讨论，因为通常情况下仅仅在登录

脚本中使用环境变量。

1.1.5 Shell命令和流程控制

在shell脚本中可以使用三类命令：

1)Unix 命令:

　　虽然在shell脚本中可以使用任意的unix命令，但是还是由一些相对更常用的命令。这些命令通常是用来

进行文件和文字操作的。

常用命令语法及功能

　　echo "some text": 将文字内容打印在屏幕上

　　ls: 文件列表

　　wc Cl filewc -w filewc -c file: 计算文件行数计算文件中的单词数计算文件中的字符数

　　cp sourcefile destfile: 文件拷贝

　　mv oldname newname : 重命名文件或移动文件

　　rm file: 删除文件

　　grep 'pattern' file: 在文件内搜索字符串比如：grep 'searchstring' file.txt

　　cut -b colnum file: 指定欲显示的文件内容范围，并将它们输出到标准输出设备比如：输出

每行第5个到第9个字符cut -b5-9 file.txt千万不要和cat命令混淆，

这是两个完全不同的命令

　　cat file.txt: 输出文件内容到标准输出设备（屏幕）上

　　file somefile: 得到文件类型

　　read var: 提示用户输入，并将输入赋值给变量

　　sort file.txt: 对file.txt文件中的行进行排序

　　uniq: 删除文本文件中出现的行列比如： sort file.txt | uniq

　　expr: 进行数学运算Example: add 2 and 3expr 2 "+" 3

　　find: 搜索文件比如：根据文件名搜索find . -name filename -print

　　tee: 将数据输出到标准输出设备(屏幕) 和文件比如：somecommand | tee outfile

　　basename file: 返回不包含路径的文件名比如： basename /bin/tux将返回 tux

　　dirname file: 返回文件所在路径比如：dirname /bin/tux将返回 /bin

　　head file: 打印文本文件开头几行

　　tail file : 打印文本文件末尾几行

　　sed: Sed是一个基本的查找替换程序。可以从标准输入（比如命令管道）读入文本，并将

结果输出到标准输出（屏幕）。该命令采用正则表达式（见参考）进行搜索。

不要和shell中的通配符相混淆。比如：将linuxfocus 替换为

LinuxFocus ：cat text.file | sed 's/linuxfocus/LinuxFocus/' > newtext.file

　　awk: awk 用来从文本文件中提取字段。缺省地，字段分割符是空格，可以使用-F指定其他分割符。

cat file.txt | awk -F, '{print $1 "," $3 }'这里我们使用，作为字段分割符，同时打印

第一个和第三个字段。如果该文件内容如下： Adam Bor, 34, IndiaKerry Miller, 22, USA

命令输出结果为：Adam Bor, IndiaKerry Miller, USA 

http://www.linuxidc.com/Linux/2007-06/4767p2.htm


